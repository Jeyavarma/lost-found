"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{893:(e,t,s)=>{s.d(t,{A:()=>g});var a=s(5155),l=s(4679),r=s(7812),n=s(7003),c=s(6617),i=s(1873),d=s(6485),o=s(508),m=s(3664),x=s(9141),h=s(5937),u=s(2115),p=s(373);function f(e){let{userId:t,showText:s=!1,size:l="md"}=e,[r,n]=(0,u.useState)(null);return((0,u.useEffect)(()=>{if(!t)return;let e=async()=>{try{let e=await fetch("".concat(p.f,"/api/presence/status/").concat(t));if(e.ok){let t=await e.json();n(t)}}catch(e){console.error("Failed to fetch user status:",e)}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[t]),r)?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"}[l]," ").concat((()=>{switch(r.status){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-400"}})()," rounded-full")}),r.deviceType&&"sm"!==l&&(0,a.jsx)("span",{className:"absolute -bottom-1 -right-1 text-xs",children:"mobile"===r.deviceType?"\uD83D\uDCF1":"\uD83D\uDCBB"})]}),s&&(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(()=>{switch(r.status){case"online":return"\uD83D\uDFE2";case"away":return"\uD83D\uDFE1";default:return"\uD83D\uDD34"}})()," ",r.statusText]})]}):null}function g(e){var t,s,u;let{item:p,isOpen:g,onClose:j,onStartChat:N}=e;return p?(0,a.jsx)(l.lG,{open:g,onOpenChange:j,children:(0,a.jsxs)(l.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(l.c7,{children:[(0,a.jsxs)(l.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-5 h-5"}),"Item Details"]}),(0,a.jsx)(l.rr,{children:"View item information and contact the reporter"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(p.itemImageUrl||p.imageUrl)&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("img",{src:p.itemImageUrl||p.imageUrl,alt:p.title,className:"max-w-full h-64 object-cover rounded-lg shadow-md"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:p.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(r.E,{className:(e=>{switch(e){case"lost":return"bg-red-500 text-white";case"found":return"bg-green-500 text-white";case"claimed":return"bg-orange-500 text-white";case"verified":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(p.status),children:p.status.charAt(0).toUpperCase()+p.status.slice(1)}),(0,a.jsx)(r.E,{variant:"outline",children:p.category}),p.matchScore&&(0,a.jsxs)(r.E,{variant:"outline",className:"text-xs",children:[p.matchScore>=60?"\uD83D\uDD25 High Match":p.matchScore>=40?"â­ Good Match":"\uD83D\uDCA1 Possible Match"," (",p.matchScore,"%)"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:p.location})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(p.date||p.createdAt).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:p.description})]}),p.reportedBy&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Reported By"}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium",children:p.reportedBy.name}),(0,a.jsx)(f,{userId:p.reportedBy._id,size:"sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm",children:p.reportedBy.email})]}),p.reportedBy.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm",children:p.reportedBy.phone})]})]})]}),p.contactInfo&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Contact Information"}),(0,a.jsx)("p",{className:"text-sm bg-gray-50 p-3 rounded-lg",children:p.contactInfo})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[(0,a.jsx)(n.$,{onClick:j,variant:"outline",className:"flex-1",children:"Close"}),(null==(t=p.reportedBy)?void 0:t.email)&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:(0,a.jsxs)("a",{href:"mailto:".concat(null==(s=p.reportedBy)?void 0:s.email,"?subject=Regarding ").concat(p.title,"&body=Hi ").concat(null==(u=p.reportedBy)?void 0:u.name,", I saw your ").concat(p.status,' item report for "').concat(p.title,'". '),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Email"]})}),N&&(0,a.jsxs)(n.$,{onClick:()=>N(p),className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Start Chat"]})]})]})]})]})}):null}},4679:(e,t,s)=>{s.d(t,{Cf:()=>x,L3:()=>u,c7:()=>h,lG:()=>i,rr:()=>p,zM:()=>d});var a=s(5155),l=s(2115),r=s(9511),n=s(5229),c=s(5016);let i=r.bL,d=r.l9,o=r.ZL;r.bm;let m=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hJ,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.UC,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[l,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hE,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});u.displayName=r.hE.displayName;let p=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s),...l})});p.displayName=r.VY.displayName}}]);