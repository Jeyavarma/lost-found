"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{893:(e,s,t)=>{t.d(s,{A:()=>f});var a=t(5155),l=t(4679),r=t(7812),c=t(7003),n=t(6617),i=t(1873),d=t(6485),o=t(508),m=t(3664),x=t(9141),h=t(5937),u=t(2115),g=t(373);function p(e){let{userId:s,showText:t=!1,size:l="md"}=e,[r,c]=(0,u.useState)(null);return((0,u.useEffect)(()=>{if(!s)return;let e=async()=>{try{let e=await fetch("".concat(g.f,"/api/presence/status/").concat(s));if(e.ok){let s=await e.json();c(s)}}catch(e){console.error("Failed to fetch user status:",e)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[s]),r)?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"}[l]," ").concat((()=>{switch(r.status){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-400"}})()," rounded-full")}),r.deviceType&&"sm"!==l&&(0,a.jsx)("span",{className:"absolute -bottom-1 -right-1 text-xs",children:"mobile"===r.deviceType?"\uD83D\uDCF1":"\uD83D\uDCBB"})]}),t&&(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(()=>{switch(r.status){case"online":return"\uD83D\uDFE2";case"away":return"\uD83D\uDFE1";default:return"\uD83D\uDD34"}})()," ",r.statusText]})]}):null}function f(e){var s,t,u;let{item:g,isOpen:f,onClose:j,onStartChat:N}=e;return g?(0,a.jsx)(l.lG,{open:f,onOpenChange:j,children:(0,a.jsxs)(l.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(l.c7,{children:(0,a.jsxs)(l.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5"}),"Item Details"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(g.itemImageUrl||g.imageUrl)&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("img",{src:g.itemImageUrl||g.imageUrl,alt:g.title,className:"max-w-full h-64 object-cover rounded-lg shadow-md"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:g.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(r.E,{className:(e=>{switch(e){case"lost":return"bg-red-500 text-white";case"found":return"bg-green-500 text-white";case"claimed":return"bg-orange-500 text-white";case"verified":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(g.status),children:g.status.charAt(0).toUpperCase()+g.status.slice(1)}),(0,a.jsx)(r.E,{variant:"outline",children:g.category}),g.matchScore&&(0,a.jsxs)(r.E,{variant:"outline",className:"text-xs",children:[g.matchScore>=60?"\uD83D\uDD25 High Match":g.matchScore>=40?"â­ Good Match":"\uD83D\uDCA1 Possible Match"," (",g.matchScore,"%)"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:g.location})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(g.date||g.createdAt).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:g.description})]}),g.reportedBy&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Reported By"}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium",children:g.reportedBy.name}),(0,a.jsx)(p,{userId:g.reportedBy._id,size:"sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm",children:g.reportedBy.email})]}),g.reportedBy.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm",children:g.reportedBy.phone})]})]})]}),g.contactInfo&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Contact Information"}),(0,a.jsx)("p",{className:"text-sm bg-gray-50 p-3 rounded-lg",children:g.contactInfo})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[(0,a.jsx)(c.$,{onClick:j,variant:"outline",className:"flex-1",children:"Close"}),(null==(s=g.reportedBy)?void 0:s.email)&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:(0,a.jsxs)("a",{href:"mailto:".concat(null==(t=g.reportedBy)?void 0:t.email,"?subject=Regarding ").concat(g.title,"&body=Hi ").concat(null==(u=g.reportedBy)?void 0:u.name,", I saw your ").concat(g.status,' item report for "').concat(g.title,'". '),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Email"]})}),N&&(0,a.jsxs)(c.$,{onClick:()=>N(g),className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Start Chat"]})]})]})]})]})}):null}},4679:(e,s,t)=>{t.d(s,{Cf:()=>x,L3:()=>u,c7:()=>h,lG:()=>i,zM:()=>d});var a=t(5155),l=t(2115),r=t(9511),c=t(5229),n=t(5016);let i=r.bL,d=r.l9,o=r.ZL;r.bm;let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[l,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.UC.displayName;let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};h.displayName="DialogHeader";let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});u.displayName=r.hE.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...l})}).displayName=r.VY.displayName}}]);