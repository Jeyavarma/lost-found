(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{6749:(e,s,t)=>{Promise.resolve().then(t.bind(t,8736))},8736:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(5155),r=t(2115),l=t(3209),i=t(7003),c=t(7812),n=t(6651),d=t(6617),o=t(5937),m=t(7828),x=t(1873),h=t(6485),j=t(1360),g=t(7176),u=t(5740),p=t(2196),N=t(8209),w=t(373);function f(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=(0,N.getAuthToken)(),t=await fetch("".concat(w.f,"/api/items/ai-matches"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e)}}catch(e){console.error("Error fetching AI matches:",e)}finally{n(!1)}},o=async(e,t)=>{try{let a=(0,N.getAuthToken)();await fetch("".concat(w.f,"/api/items/matches/").concat(e,"/").concat(t,"/view"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)}}),s(s=>s.map(s=>s.userItem._id===e&&s.matchedItem._id===t?{...s,viewed:!0}:s))}catch(e){console.error("Error marking match as viewed:",e)}};return t?(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-purple-600"}),"AI-Powered Matches"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Finding matches..."})]})})]}):0===e.length?(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-purple-600"}),"AI-Powered Matches"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No visual matches found yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Upload images to enable AI matching"})]})})]}):(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-purple-600"}),"AI-Powered Matches (",e.length,")"]}),e.some(e=>!e.viewed)&&(0,a.jsxs)(c.E,{variant:"destructive",children:[e.filter(e=>!e.viewed).length," New"]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:e.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(e.viewed?"bg-gray-50":"bg-purple-50 border-purple-200"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.E,{className:(e=>{switch(e){case"High":return"bg-green-500 text-white";case"Medium":return"bg-yellow-500 text-white";case"Low":return"bg-orange-500 text-white";default:return"bg-gray-500 text-white"}})(e.confidence),children:[e.confidence," Match"]}),!e.viewed&&(0,a.jsx)(c.E,{variant:"outline",className:"text-purple-600 border-purple-600",children:"New"})]}),(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>o(e.userItem._id,e.matchedItem._id),disabled:e.viewed,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),e.viewed?"Viewed":"Mark Viewed"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-sm text-gray-700",children:["Your ",e.userItem.status," item:"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.userItem.imageUrl&&(0,a.jsx)("img",{src:e.userItem.imageUrl,alt:e.userItem.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.userItem.title}),(0,a.jsx)(c.E,{className:"lost"===e.userItem.status?"bg-red-500 text-white":"bg-green-500 text-white",children:e.userItem.status})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Potential match:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.matchedItem.imageUrl&&(0,a.jsx)("img",{src:e.matchedItem.imageUrl,alt:e.matchedItem.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.matchedItem.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.matchedItem.location}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["By ",e.matchedItem.reportedBy.name]}),(0,a.jsx)(c.E,{className:"lost"===e.matchedItem.status?"bg-red-500 text-white":"bg-green-500 text-white",children:e.matchedItem.status})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.matchedItem.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Matched on ",new Date(e.matchedAt).toLocaleDateString()]})]})]},"".concat(e.userItem._id,"-").concat(e.matchedItem._id)))})})]})}var v=t(893),b=t(3637),y=t(7355),A=t(2619),I=t.n(A);async function E(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:t="GET",body:a,headers:r={},requireAuth:l=!0}=s,i={method:t,headers:{"Content-Type":"application/json",Accept:"application/json",...r},credentials:"include"};if(l){let e=(0,N.getAuthToken)();e&&(i.headers={...i.headers,Authorization:"Bearer ".concat(e)})}a&&"GET"!==t&&(i.body=JSON.stringify(a));try{let s=await fetch("".concat(w.f).concat(e),i);if(!s.ok){let e=await s.text();throw Error("API Error ".concat(s.status,": ").concat(e))}let t=s.headers.get("content-type");if(t&&t.includes("application/json"))return await s.json();return await s.text()}catch(s){throw console.error("API call failed for ".concat(e,":"),s),s}}let k={get:(e,s)=>E(e,{...s,method:"GET"})};class S extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Error caught by boundary:",e,s)}render(){return this.state.hasError?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"The application encountered an error. Please refresh the page."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Refresh Page"})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}function C(){var e;let[s,t]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),[A,E]=(0,r.useState)([]),[C,_]=(0,r.useState)(!0),[B,U]=(0,r.useState)(""),[L,T]=(0,r.useState)({show:!1,item:null}),[M,Z]=(0,r.useState)({show:!1,item:null});(0,r.useEffect)(()=>{console.log("ViewModal state changed:",M),M.show&&!M.item&&(console.error("Modal opened without item data"),Z({show:!1,item:null}))},[M]);let[R,D]=(0,r.useState)(null),[z,F]=(0,r.useState)(!1),[P,$]=(0,r.useState)("overview"),W=async()=>{try{let e=await k.get("/api/items/my-items");p(Array.isArray(e)?e:[]),U("")}catch(e){console.error("Failed to load user items:",e),U(e.message||"Failed to load your items")}},V=async()=>{try{let e=await k.get("/api/items/potential-matches");E(Array.isArray(e)?e:[])}catch(e){console.error("Error loading potential matches:",e),E([])}},O=async()=>{if(L.item)try{let e=(0,N.getAuthToken)(),s=await fetch("".concat(w.f,"/api/items/").concat(L.item._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(s.ok)p(e=>e.filter(e=>e._id!==L.item._id)),T({show:!1,item:null});else{let e,t=await s.text();try{e=JSON.parse(t)}catch(s){e={error:t}}alert("Failed to delete item: ".concat(e.error||"Unknown error"))}}catch(e){console.error("Delete error:",e),alert("Error deleting item")}};(0,r.useEffect)(()=>{let e=async()=>{if(!(0,N.isAuthenticated)()){window.location.href="/login";return}let e=(0,N.gL)();if(t(e),(null==e?void 0:e.role)==="staff"){window.location.href="/staff";return}if((null==e?void 0:e.role)==="admin"){window.location.href="/admin";return}await W(),await V(),y.b.connect(),_(!1)},s=()=>{console.log("Item submitted event received, reloading items..."),W(),V()};window.addEventListener("itemSubmitted",s),e();let a=()=>{W(),V()};return window.addEventListener("storage",a),()=>{window.removeEventListener("itemSubmitted",s),window.removeEventListener("storage",a),y.b.disconnect()}},[]);let G=u.filter(e=>"lost"===e.status),H=u.filter(e=>"found"===e.status);return C?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(g.A,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})})]}):(0,a.jsx)(S,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(g.A,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mcc-text-primary font-serif mb-2",children:["Welcome back, ",null==s?void 0:s.name,"!"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your lost and found reports from your dashboard"})]}),B&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-red-600 text-sm",children:B}),(0,a.jsx)("button",{onClick:()=>{U(""),W(),V()},className:"mt-2 text-red-600 underline text-sm hover:text-red-800",children:"Retry"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(l.Zp,{className:"mcc-card",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Lost Items"}),(0,a.jsx)("p",{className:"text-xl font-bold text-red-600",children:G.length})]}),(0,a.jsx)(n.A,{className:"w-6 h-6 text-red-600"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Found Items"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:H.length})]}),(0,a.jsx)(d.A,{className:"w-6 h-6 text-green-600"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),(0,a.jsx)("p",{className:"text-xl font-bold mcc-text-primary",children:u.length})]}),(0,a.jsx)(o.A,{className:"w-6 h-6 mcc-text-primary"})]})]})]}),(0,a.jsxs)(l.Zp,{className:"mcc-card",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-lg",children:"Quick Actions"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsx)(I(),{href:"/report-lost",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg hover:bg-red-100 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Report Lost"}),(0,a.jsx)("p",{className:"text-xl font-bold text-red-600",children:"+"})]}),(0,a.jsx)(n.A,{className:"w-6 h-6 text-red-600"})]})}),(0,a.jsx)(I(),{href:"/report-found",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Report Found"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:"+"})]}),(0,a.jsx)(d.A,{className:"w-6 h-6 text-green-600"})]})}),(0,a.jsx)(I(),{href:"/browse",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Browse Items"}),(0,a.jsx)("p",{className:"text-xl font-bold mcc-text-primary",children:"→"})]}),(0,a.jsx)(m.A,{className:"w-6 h-6 mcc-text-primary"})]})}),(0,a.jsx)(I(),{href:"/browse?ai=true",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"AI Search"}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-600",children:"✨"})]}),(0,a.jsx)(n.A,{className:"w-6 h-6 text-purple-600"})]})})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,a.jsx)(f,{}),(0,a.jsxs)(l.Zp,{className:"mcc-card",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"Text-Based Matches"]}),(0,a.jsx)(l.BT,{children:"Items that might match based on description keywords"})]}),(0,a.jsx)(l.Wu,{children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No potential matches found yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"We'll notify you when similar items are reported"})]}):(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(e.itemImageUrl||e.imageUrl)&&(0,a.jsx)("img",{src:e.itemImageUrl||e.imageUrl,alt:e.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)(c.E,{className:"lost"===e.status?"bg-red-500 text-white":"bg-green-500 text-white",children:"lost"===e.status?"Lost":"Found"}),e.matchScore&&(0,a.jsx)(c.E,{variant:"outline",className:"text-xs",children:e.matchScore>=60?"\uD83D\uDD25 High Match":e.matchScore>=40?"⭐ Good Match":"\uD83D\uDCA1 Possible Match"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),new Date(e.date||e.createdAt).toLocaleDateString()]}),e.matchScore&&(0,a.jsx)("div",{className:"flex items-center gap-1 text-blue-600",children:(0,a.jsxs)("span",{className:"text-xs font-medium",children:["Match: ",e.matchScore,"%"]})})]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{console.log("View clicked for:",e.title),Z({show:!0,item:e})},className:"min-w-[80px]",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"View"]})})]})},e._id))})})]}),(0,a.jsxs)(l.Zp,{className:"mcc-card",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-red-600"}),"My Lost Items"]}),(0,a.jsx)(l.BT,{children:"Items you've reported as lost"})]}),(0,a.jsx)(l.Wu,{children:0===G.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(n.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"No lost items reported"}),(0,a.jsx)(I(),{href:"/report-lost",children:(0,a.jsx)(i.$,{className:"bg-red-500 hover:bg-red-600 text-white",children:"Report Lost Item"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:G.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(e.itemImageUrl||e.imageUrl)&&(0,a.jsx)("img",{src:e.itemImageUrl||e.imageUrl,alt:e.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)(c.E,{className:"bg-red-500 text-white",children:"Lost"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),new Date(e.date).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>Z({show:!0,item:e}),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"View"]}),(0,a.jsx)(i.$,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>T({show:!0,item:e}),children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]})]})},e._id))})})]}),(0,a.jsxs)(l.Zp,{className:"mcc-card",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-600"}),"My Found Items"]}),(0,a.jsx)(l.BT,{children:"Items you've reported as found"})]}),(0,a.jsx)(l.Wu,{children:0===H.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"No found items reported"}),(0,a.jsx)(I(),{href:"/report-found",children:(0,a.jsx)(i.$,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Report Found Item"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:H.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(e.itemImageUrl||e.imageUrl)&&(0,a.jsx)("img",{src:e.itemImageUrl||e.imageUrl,alt:e.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)(c.E,{className:"bg-green-500 text-white",children:"Found"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),e.date&&new Date(e.date).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>Z({show:!0,item:e}),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"View"]}),(0,a.jsx)(i.$,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>T({show:!0,item:e}),children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]})]})},e._id))})})]})]})]})]}),(0,a.jsx)(v.A,{item:M.item,isOpen:M.show,onClose:()=>Z({show:!1,item:null}),onStartChat:e=>{console.log("Starting chat for item:",e.title);try{var t;y.b.isConnected()||(console.log("Connecting to chat server..."),y.b.connect());let a={item:e,participants:[null==s?void 0:s.id,null==(t=e.reportedBy)?void 0:t._id],roomId:"item_".concat(e._id),title:"Chat about: ".concat(e.title)};D(a),F(!0),Z({show:!1,item:null})}catch(e){console.error("Failed to start chat:",e),alert("Chat system is currently unavailable. Please try email contact.")}}}),z&&R&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full h-[600px] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-semibold",children:["Chat about: ",null==(e=R.item)?void 0:e.title]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{F(!1),D(null)},children:"Close"})]}),(0,a.jsx)(b.A,{room:R,onClose:()=>{F(!1),D(null)},currentUserId:(null==s?void 0:s.id)||""})]})}),L.show&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Delete Item"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This will permanently delete the item. This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>T({show:!1,item:null}),children:"Cancel"}),(0,a.jsx)(i.$,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:O,children:"Delete"})]})]})})]})})}}},e=>{e.O(0,[5707,297,3083,3739,5769,4130,550,6552,2353,3637,8441,1255,7358],()=>e(e.s=6749)),_N_E=e.O()}]);