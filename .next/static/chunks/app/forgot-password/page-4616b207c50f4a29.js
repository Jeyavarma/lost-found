(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2162],{235:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(5155),a=r(2115),i=r(489),o=r(3101),l=r(5016);let n=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(n(),r),...a})});d.displayName=i.b.displayName},373:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});let s="https://lost-found-79xn.onrender.com"},489:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var s=r(2115),a=r(7602),i=r(5155),o=s.forwardRef((e,t)=>(0,i.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var l=o},2506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var s=r(5155),a=r(2115),i=r(2619),o=r.n(i),l=r(7003),n=r(3209),d=r(6170),c=r(235),m=r(5626),u=r(2529),h=r(7176);class p{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let g={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},f=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},b=async(e,t,r={})=>{let s=await fetch(g.origin+e,{method:"POST",headers:r,body:t}),a=await s.text(),i=new p(s.status,a);if(s.ok)return i;throw i},w=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},x=e=>e.webdriver||!e.languages||0===e.languages.length,y=()=>new p(451,"Unavailable For Headless Browser"),v=(e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;var r=e.list,s=e.watchVariable;if(!Array.isArray(r))throw"The BlockList list has to be an array";if("string"!=typeof s)throw"The BlockList watchVariable has to be a string";let a=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"==typeof a&&e.list.includes(a)},j=()=>new p(403,"Forbidden"),k=async(e,t,r)=>{let s=Number(await r.get(e)||0);return t-Date.now()+s},N=async(e,t,r)=>{if(!t.throttle||!r)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);let s=t.id||e;return await k(s,t.throttle,r)>0||(await r.set(s,Date.now().toString()),!1)},P=()=>new p(429,"Too Many Requests"),S={init:(e,t="https://api.emailjs.com")=>{if(!e)return;let r=f(e);g.publicKey=r.publicKey,g.blockHeadless=r.blockHeadless,g.storageProvider=r.storageProvider,g.blockList=r.blockList,g.limitRate=r.limitRate,g.origin=r.origin||t},send:async(e,t,r,s)=>{let a=f(s),i=a.publicKey||g.publicKey,o=a.blockHeadless||g.blockHeadless,l=a.storageProvider||g.storageProvider,n={...g.blockList,...a.blockList},d={...g.limitRate,...a.limitRate};return o&&x(navigator)?Promise.reject(y()):(w(i,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(r),r&&v(n,r))?Promise.reject(j()):await N(location.pathname,d,l)?Promise.reject(P()):b("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})}};var T=r(373);function O(){let[e,t]=(0,a.useState)(1),[r,i]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[w,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[j,k]=(0,a.useState)(""),N=async e=>{e.preventDefault(),x(!0),k(""),console.log("\uD83D\uDD0D Starting forgot password for:",r);try{console.log("\uD83D\uDCE1 Calling backend API...");let e=await fetch("".concat(T.f,"/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})});if(console.log("\uD83D\uDCE1 Backend response status:",e.status),e.ok){let s=await e.json();console.log("✅ Backend response:",s);let a=s.otp;if(!a)return void k("Failed to generate OTP");if(console.log("\uD83D\uDD22 OTP received:",a),!a)return void k("Failed to get OTP from backend");let i=new Date(Date.now()+6e5).toLocaleTimeString();console.log("\uD83D\uDCE7 Sending OTP email via EmailJS...");try{await S.send("LostandFound_otp","lostAndFound_otp",{to_email:r,passcode:a,time:i},"your-emailjs-public-key"),console.log("✅ EmailJS success - OTP sent to email"),t(2)}catch(e){console.error("❌ EmailJS error:",e),k("Email sent but may take 2-3 minutes to arrive."),t(2)}}else{let t=await e.json();console.error("❌ Backend error:",t),k(t.error||"Failed to send OTP")}}catch(e){console.error("❌ Network error:",e),k("Network error: ".concat(e))}finally{x(!1)}},P=async e=>{e.preventDefault(),x(!0),k("");try{let e=await fetch("".concat(T.f,"/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:p,password:f})});if(e.ok)v(!0);else{let t=await e.json();k(t.error||"Failed to reset password")}}catch(e){k("Network error. Please try again.")}finally{x(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(h.A,{}),(0,s.jsx)("div",{className:"max-w-md mx-auto px-4 py-12",children:(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"text-center",children:(0,s.jsx)(n.ZB,{className:"text-2xl text-red-800",children:"Forgot Password"})}),(0,s.jsx)(n.Wu,{children:y?(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(u.A,{className:"w-16 h-16 text-green-600 mx-auto"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Password Reset!"}),(0,s.jsx)(o(),{href:"/login",children:(0,s.jsx)(l.$,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Login Now"})})]}):1===e?(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{htmlFor:"email",children:"Email Address"}),(0,s.jsx)(d.p,{id:"email",type:"email",value:r,onChange:e=>i(e.target.value),required:!0})]}),j&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:j}),(0,s.jsx)(l.$,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white",disabled:w,children:w?"Sending...":"Send OTP"}),(0,s.jsxs)(o(),{href:"/login",className:"block text-center text-sm text-gray-600",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-1"}),"Back to Login"]})]}):(0,s.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{htmlFor:"otp",children:"Enter OTP"}),(0,s.jsx)(d.p,{id:"otp",value:p,onChange:e=>g(e.target.value),maxLength:6,required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Check your email for the 6-digit OTP code. May take 1-3 minutes to arrive."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{htmlFor:"password",children:"New Password"}),(0,s.jsx)(d.p,{id:"password",type:"password",value:f,onChange:e=>b(e.target.value),required:!0})]}),j&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:j}),(0,s.jsx)(l.$,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white",disabled:w,children:w?"Resetting...":"Reset Password"})]})})]})})]})}S.init("your-emailjs-public-key")},2529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6170:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(5155),a=r(2115),i=r(5016);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},8324:(e,t,r)=>{Promise.resolve().then(r.bind(r,2506))}},e=>{e.O(0,[5707,297,3083,3739,6552,8441,1255,7358],()=>e(e.s=8324)),_N_E=e.O()}]);