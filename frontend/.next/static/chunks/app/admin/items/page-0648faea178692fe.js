(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6369],{235:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(5155),l=a(2115),r=a(489),i=a(3101),n=a(5016);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.b,{ref:s,className:(0,n.cn)(d(),a),...l})});c.displayName=r.b.displayName},373:(e,s,a)=>{"use strict";a.d(s,{f:()=>t});let t="https://lost-found-79xn.onrender.com"},3399:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var t=a(5155),l=a(2115),r=a(3209),i=a(7003),n=a(7812),d=a(6170),c=a(7507),o=a(4679),m=a(235),u=a(7001),x=a(8162),h=a(5917),f=a(5016);let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.bL,{ref:s,className:(0,f.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,t.jsx)(x.C1,{className:(0,f.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})})});p.displayName=x.bL.displayName;var g=a(6617),j=a(1360),b=a(9559),v=a(1010),y=a(9163),N=a(8209),w=a(373);function C(){let[e,s]=(0,l.useState)([]),[a,x]=(0,l.useState)([]),[h,f]=(0,l.useState)(!0),[C,k]=(0,l.useState)(""),[A,L]=(0,l.useState)("all"),[E,S]=(0,l.useState)("all"),[z,F]=(0,l.useState)([]),[R,J]=(0,l.useState)(!1),[T,I]=(0,l.useState)(null),[D,_]=(0,l.useState)(""),[B,q]=(0,l.useState)(""),[P,V]=(0,l.useState)({title:"",description:"",category:"",status:"",location:"",contactInfo:"",approved:!0,flagged:!1});(0,l.useEffect)(()=>{(()=>{if(!(0,N.isAuthenticated)()){window.location.href="/login";return}let e=(0,N.gL)();if((null==e?void 0:e.role)!=="admin"){window.location.href="/dashboard";return}U()})()},[]),(0,l.useEffect)(()=>{let s=e;C&&(s=s.filter(e=>e.title.toLowerCase().includes(C.toLowerCase())||e.description.toLowerCase().includes(C.toLowerCase())||e.category.toLowerCase().includes(C.toLowerCase())||e.location.toLowerCase().includes(C.toLowerCase()))),"all"!==A&&(s=s.filter(e=>e.status===A)),"all"!==E&&(s=s.filter(e=>e.category===E)),x(s)},[e,C,A,E]);let U=async()=>{try{let e=(0,N.getAuthToken)(),a=await fetch("".concat(w.f,"/api/admin/recent-items"),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();s(e)}else q("Failed to fetch items")}catch(e){q("Failed to fetch items")}finally{f(!1)}},$=async e=>{if(e.preventDefault(),T)try{let e=(0,N.getAuthToken)();(await fetch("".concat(w.f,"/api/admin/items/").concat(T._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(P)})).ok?(_("Item updated successfully"),J(!1),I(null),U()):q("Failed to update item")}catch(e){q("Failed to update item")}},O=async e=>{if(confirm("Are you sure you want to delete this item?"))try{let s=(0,N.getAuthToken)();(await fetch("".concat(w.f,"/api/admin/items/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok?(_("Item deleted successfully"),U()):q("Failed to delete item")}catch(e){q("Failed to delete item")}},K=async()=>{if(0!==z.length&&confirm("Delete ".concat(z.length," items?")))try{let e=(0,N.getAuthToken)(),s=z.map(s=>fetch("".concat(w.f,"/api/admin/items/").concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}));await Promise.all(s),_("".concat(z.length," items deleted successfully")),F([]),U()}catch(e){q("Failed to delete items")}},M=async e=>{try{let s=(0,N.getAuthToken)();(await fetch("".concat(w.f,"/api/admin/moderate-item/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({action:"approve"})})).ok?(_("Item approved successfully"),U()):q("Failed to approve item")}catch(e){q("Failed to approve item")}};return h?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(y.A,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading items..."})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(y.A,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mcc-text-primary font-serif mb-2",children:"Items Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage all lost and found items"})]}),D&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-green-800",children:D})}),B&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-800",children:B})}),(0,t.jsxs)(r.Zp,{className:"mcc-card",children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-5 h-5"}),"Items (",a.length,")"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[z.length>0&&(0,t.jsxs)(i.$,{onClick:K,variant:"outline",size:"sm",className:"text-red-600",children:[(0,t.jsx)(j.A,{className:"w-4 h-4 mr-1"}),"Delete (",z.length,")"]}),(0,t.jsxs)(i.$,{onClick:U,variant:"outline",size:"sm",children:[(0,t.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Refresh"]})]})]})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(d.p,{placeholder:"Search items...",value:C,onChange:e=>k(e.target.value),className:"w-full"})}),(0,t.jsxs)(c.l6,{value:A,onValueChange:L,children:[(0,t.jsx)(c.bq,{className:"w-40",children:(0,t.jsx)(c.yv,{})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"all",children:"All Status"}),(0,t.jsx)(c.eb,{value:"lost",children:"Lost"}),(0,t.jsx)(c.eb,{value:"found",children:"Found"}),(0,t.jsx)(c.eb,{value:"claimed",children:"Claimed"}),(0,t.jsx)(c.eb,{value:"verified",children:"Verified"})]})]}),(0,t.jsxs)(c.l6,{value:E,onValueChange:S,children:[(0,t.jsx)(c.bq,{className:"w-40",children:(0,t.jsx)(c.yv,{})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"all",children:"All Categories"}),(0,t.jsx)(c.eb,{value:"Electronics",children:"Electronics"}),(0,t.jsx)(c.eb,{value:"Books",children:"Books"}),(0,t.jsx)(c.eb,{value:"Clothing",children:"Clothing"}),(0,t.jsx)(c.eb,{value:"Accessories",children:"Accessories"}),(0,t.jsx)(c.eb,{value:"Documents",children:"Documents"}),(0,t.jsx)(c.eb,{value:"Keys",children:"Keys"})]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>{var s;return(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(p,{checked:z.includes(e._id),onCheckedChange:s=>{s?F([...z,e._id]):F(z.filter(s=>s!==e._id))}}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),(0,t.jsx)(n.E,{className:"lost"===e.status?"bg-red-500 text-white":"found"===e.status?"bg-green-500 text-white":"claimed"===e.status?"bg-orange-500 text-white":"bg-blue-500 text-white",children:e.status}),(0,t.jsx)(n.E,{variant:"outline",children:e.category}),!e.approved&&(0,t.jsx)(n.E,{className:"bg-yellow-500 text-white",children:"Pending"}),e.flagged&&(0,t.jsx)(n.E,{className:"bg-red-600 text-white",children:"Flagged"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,t.jsx)("span",{children:(null==(s=e.reportedBy)?void 0:s.name)||"Anonymous"}),(0,t.jsx)("span",{children:e.location}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[!e.approved&&(0,t.jsx)(i.$,{onClick:()=>M(e._id),size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",children:"Approve"}),(0,t.jsx)(i.$,{onClick:()=>{I(e),V({title:e.title,description:e.description,category:e.category,status:e.status,location:e.location,contactInfo:e.contactInfo||"",approved:e.approved,flagged:e.flagged}),J(!0)},size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white",children:(0,t.jsx)(v.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.$,{onClick:()=>O(e._id),size:"sm",variant:"outline",className:"text-red-600",children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]})]})},e._id)})})]})]}),(0,t.jsx)(o.lG,{open:R,onOpenChange:J,children:(0,t.jsxs)(o.Cf,{className:"max-w-2xl",children:[(0,t.jsx)(o.c7,{children:(0,t.jsx)(o.L3,{children:"Edit Item"})}),(0,t.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Title *"}),(0,t.jsx)(d.p,{value:P.title,onChange:e=>V({...P,title:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Category *"}),(0,t.jsxs)(c.l6,{value:P.category,onValueChange:e=>V({...P,category:e}),children:[(0,t.jsx)(c.bq,{children:(0,t.jsx)(c.yv,{})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"Electronics",children:"Electronics"}),(0,t.jsx)(c.eb,{value:"Books",children:"Books"}),(0,t.jsx)(c.eb,{value:"Clothing",children:"Clothing"}),(0,t.jsx)(c.eb,{value:"Accessories",children:"Accessories"}),(0,t.jsx)(c.eb,{value:"Documents",children:"Documents"}),(0,t.jsx)(c.eb,{value:"Keys",children:"Keys"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Description *"}),(0,t.jsx)(u.T,{value:P.description,onChange:e=>V({...P,description:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Status *"}),(0,t.jsxs)(c.l6,{value:P.status,onValueChange:e=>V({...P,status:e}),children:[(0,t.jsx)(c.bq,{children:(0,t.jsx)(c.yv,{})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"lost",children:"Lost"}),(0,t.jsx)(c.eb,{value:"found",children:"Found"}),(0,t.jsx)(c.eb,{value:"claimed",children:"Claimed"}),(0,t.jsx)(c.eb,{value:"verified",children:"Verified"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Location *"}),(0,t.jsx)(d.p,{value:P.location,onChange:e=>V({...P,location:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Contact Info"}),(0,t.jsx)(d.p,{value:P.contactInfo,onChange:e=>V({...P,contactInfo:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p,{id:"approved",checked:P.approved,onCheckedChange:e=>V({...P,approved:!!e})}),(0,t.jsx)(m.J,{htmlFor:"approved",children:"Approved"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p,{id:"flagged",checked:P.flagged,onCheckedChange:e=>V({...P,flagged:!!e})}),(0,t.jsx)(m.J,{htmlFor:"flagged",children:"Flagged"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(i.$,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Update Item"}),(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>J(!1),children:"Cancel"})]})]})]})})]})]})}},4679:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>u,L3:()=>h,c7:()=>x,lG:()=>d,rr:()=>f,zM:()=>c});var t=a(5155),l=a(2115),r=a(9511),i=a(5229),n=a(5016);let d=r.bL,c=r.l9,o=r.ZL;r.bm;let m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,s)=>{let{className:a,children:l,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(r.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[l,(0,t.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});h.displayName=r.hE.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=r.VY.displayName},6158:(e,s,a)=>{Promise.resolve().then(a.bind(a,3399))},6170:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(5155),l=a(2115),r=a(5016);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},7001:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(5155),l=a(2115),r=a(5016);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});i.displayName="Textarea"},7507:(e,s,a)=>{"use strict";a.d(s,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>m});var t=a(5155),l=a(2115),r=a(7887),i=a(4033),n=a(2108),d=a(5917),c=a(5016);let o=r.bL;r.YJ;let m=r.WT,u=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.l9.displayName;let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let f=l.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-300 bg-gray-50 text-gray-900 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(x,{}),(0,t.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(h,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.JU.displayName;let p=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-200 hover:bg-gray-200 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(r.p4,{children:l})]})});p.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.wv.displayName}},e=>{e.O(0,[5707,297,7856,5004,3739,524,7675,9311,8441,1255,7358],()=>e(e.s=6158)),_N_E=e.O()}]);