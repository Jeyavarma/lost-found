(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{373:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});let a="https://lost-found-79xn.onrender.com"},1169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2056:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2529:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2559:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>i,TN:()=>d});var a=s(5155),l=s(2115),r=s(3101),c=s(5016);let n=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=l.forwardRef((e,t)=>{let{className:s,variant:l,...r}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,c.cn)(n({variant:l}),s),...r})});i.displayName="Alert",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h5",{ref:t,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",s),...l})}).displayName="AlertTitle";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",s),...l})});d.displayName="AlertDescription"},3029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(5155),l=s(2115),r=s(3209),c=s(2559),n=s(2529),i=s(2056),d=s(1169),o=s(6617),m=s(6651),x=s(6983);let u=(0,s(1847).A)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var h=s(9163),p=s(8209),g=s(373);function f(){let[e,t]=(0,l.useState)(null),[s,f]=(0,l.useState)({totalUsers:0,totalItems:0,lostItems:0,foundItems:0,pendingClaims:0,verifiedClaims:0}),[N,j]=(0,l.useState)([]),[y,v]=(0,l.useState)([]),[b,k]=(0,l.useState)(!1),[A,w]=(0,l.useState)(!1),[I,S]=(0,l.useState)(!1),[C,M]=(0,l.useState)(null),[_,F]=(0,l.useState)(""),[P,B]=(0,l.useState)(""),[U,q]=(0,l.useState)({name:"",email:"",password:"",role:"student",phone:"",studentId:"",department:""}),[z,L]=(0,l.useState)(""),[T,Z]=(0,l.useState)(""),[W,V]=(0,l.useState)(!1),[E,R]=(0,l.useState)({_id:"",name:"",email:"",role:"student",phone:"",studentId:"",department:"",year:"",shift:""}),[D,H]=(0,l.useState)(!1),[O,G]=(0,l.useState)({_id:"",title:"",description:"",category:"",status:"",location:"",contactInfo:""});(0,l.useEffect)(()=>{(()=>{if(!(0,p.isAuthenticated)()){window.location.href="/login";return}let e=(0,p.gL)();if((null==e?void 0:e.role)!=="admin"){window.location.href="/dashboard";return}t(e),J()})()},[]);let J=async()=>{k(!0),B("");try{let e=(0,p.getAuthToken)();console.log("\uD83D\uDD17 Backend URL:",g.f),console.log("\uD83D\uDD11 Token:",e?"Present":"Missing"),console.log("\uD83D\uDCCA Fetching admin data..."),console.log("\uD83D\uDCCA Fetching admin stats...");let t=await fetch("".concat(g.f,"/api/admin/stats"),{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("\uD83D\uDCCA Stats response:",t.status),t.ok){let e=await t.json();console.log("✅ Stats data received:",e),f({totalUsers:e.totalUsers||0,totalItems:e.totalItems||0,lostItems:e.lostItems||0,foundItems:e.foundItems||0,pendingClaims:e.pendingItems||0,verifiedClaims:e.resolvedItems||0})}else{let e=await t.text();console.error("❌ Stats API error:",e),B("Stats API failed: ".concat(t.status," - ").concat(e));return}console.log("\uD83D\uDCE6 Fetching recent items...");let s=await fetch("".concat(g.f,"/api/admin/recent-items"),{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("\uD83D\uDCE6 Items response:",s.status),s.ok){let e=await s.json();console.log("✅ Items data received:",(null==e?void 0:e.length)||0,"items"),j(e||[])}else{let e=await s.text();console.error("⚠️ Items API error (non-critical):",e)}console.log("⏳ Fetching pending claims...");let a=await fetch("".concat(g.f,"/api/admin/claims/pending"),{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("⏳ Claims response:",a.status),a.ok){let e=await a.json();console.log("✅ Claims data received:",(null==e?void 0:e.length)||0,"claims");let t=(e||[]).map(e=>{var t,s,a;return{_id:e._id,itemId:e._id,claimantId:(null==(t=e.claimedBy)?void 0:t._id)||"unknown",ownershipProof:e.ownershipProof||"No proof provided",additionalInfo:e.additionalClaimInfo||e.description,status:"pending",createdAt:e.claimDate||e.createdAt,item:e,claimant:{name:(null==(s=e.claimedBy)?void 0:s.name)||"Anonymous",email:(null==(a=e.claimedBy)?void 0:a.email)||"unknown@mcc.edu"}}});v(t)}else console.error("⚠️ Claims API error (non-critical):",a.status);console.log("\uD83C\uDF89 Admin data loaded successfully!")}catch(e){console.error("\uD83D\uDCA5 Critical error fetching admin data:",e),B("Network error: ".concat(e,". Check if backend is running at ").concat(g.f))}finally{k(!1)}};return b&&0===s.totalUsers?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(h.A,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(h.A,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mcc-text-primary font-serif mb-2",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage the MCC Lost & Found system"})]}),_&&(0,a.jsxs)(c.Fc,{className:"mb-6 border-green-200 bg-green-50",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),(0,a.jsx)(c.TN,{className:"text-green-800",children:_})]}),P&&(0,a.jsxs)(c.Fc,{className:"mb-6 border-red-200 bg-red-50",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)(c.TN,{className:"text-red-800",children:P})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.totalUsers}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Users"})]})}),(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:s.totalItems}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Items"})]})}),(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:s.lostItems}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Lost"})]})}),(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:s.foundItems}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Found"})]})}),(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:s.pendingClaims}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pending"})]})}),(0,a.jsx)(r.Zp,{className:"mcc-card",children:(0,a.jsxs)(r.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(u,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:s.verifiedClaims}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Verified"})]})})]})]})]})}},6617:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8489:(e,t,s)=>{Promise.resolve().then(s.bind(s,3029))}},e=>{e.O(0,[5707,297,7856,5004,3739,9311,8441,1255,7358],()=>e(e.s=8489)),_N_E=e.O()}]);